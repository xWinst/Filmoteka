{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAAMC,EAAYC,SAASC,cAAc,eACnCC,EAAWF,SAASC,cAAc,aAClCE,EAAUH,SAASC,cAAc,YACjC,EAASD,SAAYC,cAAc,6BAkBzC,SAASG,EAAYC,GACjBN,EAAUO,UAAUC,OAAO,UAC3BL,EAASI,UAAUC,OAAO,UAC1BF,EAAMG,OAAOF,UAAUG,IAAI,UAC3BC,aAAaC,QAAQ,iBAAkBN,EAAMG,OAAOI,MAEpDC,EAAa,E,CAOjB,SAASA,EAAaC,GAClB,MAAMC,EAAiBL,aAAaM,QAAQ,kBACtCC,EAAcC,KAAKC,MAAMT,aAAaM,QAAQD,KAAoB,GAClEK,EAwBV,WACI,IAAIA,EAEAA,EADAC,OAAOC,YAAc,KACX,EACHD,OAAOC,YAAc,IAClB,EACG,EACjB,OAAOF,C,CA/BSG,GACVC,GAAa,EAAAC,EAAAC,SAAcT,EAAYU,OAAQP,GACrD,IAAIQ,EAEJJ,EAAWK,GAAG,aAAaxB,IAEtB,GADD,EAASyB,gBAAiB,SACtBb,EAAYU,QAAUP,EAAS,CAC/B,GAAmB,IAAff,EAAM0B,KAEN,YADAP,EAAWQ,WAAW,GAG1B,EAASC,aAAa,QAAQ,gB,CAElCL,EAAcX,EAAYiB,MACtB7B,EAAM0B,KAAOX,EAAUA,EACvBf,EAAM0B,KAAOX,GAEjBjB,EAAQgC,WAAY,EAAAtC,EAAAuC,cAAaR,GACjClB,aAAaC,QAAQ,UAAWO,KAAKmB,UAAUT,IAC/CU,eAAe3B,QAAQ,cAAeN,EAAM0B,KAAK,IAErDP,EAAWQ,WAAWlB,E,CArDzBd,SAAQuC,KAAKC,iBAAiB,SAyB/B,WACI3B,EAAayB,eAAetB,QAAQ,e,IAzBxCb,EAAQqC,iBAAiB,QAASC,EAAAC,WAGlC,WACI,GAAiC,gBAA7BrB,OAAOsB,SAASC,SAA4B,OAChDN,eAAe3B,QAAQ,SAAU,WACjCZ,EAAUyC,iBAAiB,QAASpC,GACpCF,EAASsC,iBAAiB,QAASpC,GACY,UAA3CM,aAAaM,QAAQ,kBACrBd,EAAS2C,cAAc,IAAIC,MAAM,UAEjC/C,EAAU8C,cAAc,IAAIC,MAAM,S,CAV1CC","sources":["src/my-library.js"],"sourcesContent":["import { createMarkup } from './js/createMarkup';\nimport getPagination from './js/pagination';\nimport { openModal } from './js/openMovieInfo';\n\nconst wachedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nconst gallery = document.querySelector('.gallery');\nconst сontainer = document.querySelector('#tui-pagination-container');\n\ndocument.body.addEventListener('close', rerender);\ngallery.addEventListener('click', openModal);\npageInit();\n\nfunction pageInit() {\n    if (window.location.pathname === '/index.html') return;\n    sessionStorage.setItem('window', 'library');\n    wachedBtn.addEventListener('click', showLibrary);\n    queueBtn.addEventListener('click', showLibrary);\n    if (localStorage.getItem('currentLibrary') === 'queue') {\n        queueBtn.dispatchEvent(new Event('click'));\n    } else {\n        wachedBtn.dispatchEvent(new Event('click'));\n    }\n}\n\nfunction showLibrary(event) {\n    wachedBtn.classList.remove('active');\n    queueBtn.classList.remove('active');\n    event.target.classList.add('active');\n    localStorage.setItem('currentLibrary', event.target.name);\n\n    renderLibary(1);\n}\n\nfunction rerender() {\n    renderLibary(sessionStorage.getItem('currentPage'));\n}\n\nfunction renderLibary(currentPage) {\n    const currentLibrary = localStorage.getItem('currentLibrary');\n    const libraryList = JSON.parse(localStorage.getItem(currentLibrary)) || [];\n    const perPage = getPerPage();\n    const pagination = getPagination(libraryList.length, perPage);\n    let visibleList;\n\n    pagination.on('afterMove', event => {\n        сontainer.removeAttribute('style');\n        if (libraryList.length <= perPage) {\n            if (event.page === 2) {\n                pagination.movePageTo(1);\n                return;\n            }\n            сontainer.setAttribute('style', 'display: none');\n        }\n        visibleList = libraryList.slice(\n            event.page * perPage - perPage,\n            event.page * perPage\n        );\n        gallery.innerHTML = createMarkup(visibleList);\n        localStorage.setItem('gallery', JSON.stringify(visibleList));\n        sessionStorage.setItem('currentPage', event.page);\n    });\n    pagination.movePageTo(currentPage);\n}\n\nfunction getPerPage() {\n    let perPage;\n    if (window.innerWidth >= 1280) {\n        perPage = 9;\n    } else if (window.innerWidth >= 768) {\n        perPage = 8;\n    } else perPage = 4;\n    return perPage;\n}\n"],"names":["$g4lwF","parcelRequire","$fc8e7c71b3b7ed96$var$wachedBtn","document","querySelector","$fc8e7c71b3b7ed96$var$queueBtn","$fc8e7c71b3b7ed96$var$gallery","$fc8e7c71b3b7ed96$var$showLibrary","event","classList","remove","target","add","localStorage","setItem","name","$fc8e7c71b3b7ed96$var$renderLibary","currentPage","currentLibrary","getItem","libraryList","JSON","parse","perPage","window","innerWidth","$fc8e7c71b3b7ed96$var$getPerPage","pagination","$2nhTy","default","length","visibleList","on","removeAttribute","page","movePageTo","setAttribute","slice","innerHTML","createMarkup","stringify","sessionStorage","body","addEventListener","$hRJgH","openModal","location","pathname","dispatchEvent","Event","$fc8e7c71b3b7ed96$var$pageInit"],"version":3,"file":"my-library.a26a2113.js.map"}